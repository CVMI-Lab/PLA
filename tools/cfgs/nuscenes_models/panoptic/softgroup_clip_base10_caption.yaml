_BASE_CONFIG_: cfgs/nuscenes_models/panoptic/softgroup_clip.yaml

DATA_CONFIG:
  stuff_class_idx: [12, 13, 14, 15]
  base_class_idx: [ 1, 2, 3, 4, 8, 9, 10, 13, 14, 15 ]
  # barrier, motorcycle, pedestrian, traffic_cone, sidewalk
  novel_class_idx: [ 0, 5, 6, 7, 12 ]
  ignore_class_idx: [ 11 ] # ignore category will be mapped into novel for binary classifier

  CAPTION_INFO:

    KEY: [SCENE, VIEW, ENTITY]

    SCENE:
      ENABLED: False
      CAPTION_PATH: text_embed/caption_scene_nuscenes_v1.0-trainval_vit-gpt2-image-captioning_v1.0-trainval.json
      GATHER_CAPTION: True

    VIEW:
      ENABLED: True
      CAPTION_PATH: text_embed/caption_view_nuscenes_v1.0-trainval_vit-gpt2-image-captioning_v1.0-trainval.json
      SELECT: ratio
      NUM: 1
      RATIO: 1.0
      GATHER_CAPTION: True

    ENTITY:
      ENABLED: False
      CAPTION_PATH:
      SELECT: ratio
      NUM: 1
      RATIO: 1.0
      LOSS_WEIGHT: 0.1
      GATHER_CAPTION: True


MODEL:
  BINARY_HEAD:
    NAME: BinaryHead
    DETACH: True
    CHANNEL: 32
    THRESH: 0.5
    CUSTOM_SP1X1: False
    NUM_FILTERS: [32, 64, 128, 256, 256]

    HOOK_FEATURE_LIST: [ 'unet.blocks.block1', 'unet.u.blocks.block1',
                         'unet.u.u.blocks.block1', 'unet.u.u.u.blocks.block1',
                         'unet.u.u.u.u.blocks.block1' ]

  TASK_HEAD:
    NAME: TextSegHead
    CORRECT_SEG_PRED_BINARY: True

  CAPTION_HEAD:
    NAME: CaptionHead
    POOLING_TYPE: avg
    FEAT_NORM: True
    LOGIT_SCALE:
      value: 100.0
      learnable: True
    CUDA_ENABLED: False
    LOSS_WEIGHT:
      SCENE: 0.1
      VIEW: 0.1
      ENTITY: 0.1
  
  INST_HEAD:
    CORRECT_SEG_PRED_BINARY: True
