CLASS_NAMES: ['road', 'parking', 'sidewalk', 'otherground', 'building', 'fence', 'vegetation',
              'trunk', 'terrain', 'pole', 'traffic-sign',
              'car', 'bicycle', 'motorcycle', 'truck', 'other-vehicle', 'person', 'bicyclist',
              'motorcyclist']

DATA_CONFIG:
  _BASE_CONFIG_: cfgs/dataset_configs/kitti_dataset_v2.yaml
  DATASET: KittiDataset
  XYZ_NORM: False
  COLLATE_FN: collate_batch_lai
  MIN_SPATIAL_SCALE: 128

MODEL:
  NAME: SparseUNetTextSeg
  REMAP_FROM_3DLANG: False

  BACKBONE_3D:
    NAME: SparseUNetIndoor
    IN_CHANNEL: 4
    MID_CHANNEL: 32
    BLOCK_RESIDUAL: True
    BLOCK_REPS: 2
    NUM_FILTERS: [32, 64, 128, 256, 256]
    CUSTOM_SP1X1: False

  ADAPTER:
    NAME: VLAdapter
    EVAL_ONLY: False
    NUM_ADAPTER_LAYERS: 1
    TEXT_DIM: -1
    LAST_NORM: True

  TASK_HEAD:
    NAME: TextSegHead
    FEAT_NORM: False
    VOXEL_LOSS: True

    LAST_NORM: True
    TEXT_EMBED:
      NAME: CLIP
      NORM: True
      PATH: text_embed/kitti_clip-ViT-B16_id.pth
    FEAT_NORM: False
    LOGIT_SCALE:
      value: 1.0
      learnable: False

TEXT_ENCODER:
  NAME: CLIP
  BACKBONE: ViT-B/16  # ['RN50', 'RN101', 'RN50x4', 'RN50x16', 'RN50x64', 'ViT-B/32', 'ViT-B/16', 'ViT-L/14']
  TEMPLATE: identity
  EXTRACT_EMBED: False  # Online extract text embeding from class or not
  CATEGORY_NAMES: ['road', 'parking', 'sidewalk', 'otherground', 'building', 'fence', 'vegetation',
                  'trunk', 'terrain', 'pole', 'traffic-sign',
                  'car', 'bicycle', 'motorcycle', 'truck', 'other-vehicle', 'person', 'bicyclist',
                  'motorcyclist']
#  BERT:
#  BACKBONE: bert-base-uncased

OPTIMIZATION:
  TEST_BATCH_SIZE_PER_GPU: 1
  BATCH_SIZE_PER_GPU: 4
  NUM_EPOCHS: 50
  LR: 0.006  # 4e-3
  SCHEDULER: poly
  OPTIMIZER: adamw
  WEIGHT_DECAY: 0.02
  MOMENTUM: 0.9
  STEP_EPOCH: 60
  MULTIPLIER: 0.1
  CLIP_GRAD: False
  PCT_START: 0.52
  DIV_FACTOR: 2
  MOMS: [0.95, 0.85]
  LR_CLIP: 0.000001
  # SAVE_EPOCH: [60]

  POWER: 0.9

OTHERS:
  PRINT_FREQ: 20
  SYNC_BN: False
  USE_AMP: True
  EVAL_FREQ: 10
  FIND_UNUSED_PARAMETERS: True

OSS:
  DATA: False