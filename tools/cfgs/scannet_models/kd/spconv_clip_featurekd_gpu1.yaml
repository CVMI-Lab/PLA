CLASS_NAMES: [wall, floor, cabinet, bed, chair, sofa, table, door, window, bookshelf, picture, counter, desk,
              curtain, refrigerator, showercurtain, toilet, sink, bathtub, otherfurniture]

DATA_CONFIG:
  _BASE_CONFIG_: cfgs/dataset_configs/scannet_dataset.yaml
  ignore_class_idx: []
  LOAD_KD_LABEL_TRAIN: True
  KD_LABEL_DIR: ../data/scannetv2/lseg_feats
  KD_LABEL_NORM: True

MODEL:
  NAME: SparseUNetTextSeg
  REMAP_FROM_3DLANG: False

  VFE:
    NAME: IndoorVFE
    USE_XYZ: True

  BACKBONE_3D:
    NAME: SparseUNetIndoor
    IN_CHANNEL: 6
    MID_CHANNEL: 16
    BLOCK_RESIDUAL: True
    BLOCK_REPS: 2
    NUM_BLOCKS: 7
    CUSTOM_SP1X1: True

  KD_HEAD:
    NAME: KDHeadTemplate
    IN_FEAT_NAME: backbone_3d_feats
    OUT_FEAT_NAME: adapter_feats
    FEAT_NORM: True

    KD_ADAPTER: {
      in_channel: 16,
      block_type: [ 'BasicBlock1D' ],
      num_filters: [ 512 ],
      strides: [ 1 ],
      padding: [ 0 ],
      kernel_size: [ 1 ]
    }
    
    LOSS_CONFIG:
      LOSS_WEIGHT: 1.0

  TASK_HEAD:
    NAME: TextSegHead
    EVAL_ONLY: True
    IN_FEAT_NAME: adapter_feats
    IN_CHANNEL: 512
    NO_V2P_MAP: True

    NUM_ADAPTER_LAYERS: 1
    TEXT_EMBED:
      NAME: CLIP
      NORM: True
      PATH: text_embed/scannet_clip-ViT-B32_id.pth

TEXT_ENCODER:
  NAME: CLIP
  BACKBONE: ViT-B/32  # ['RN50', 'RN101', 'RN50x4', 'RN50x16', 'RN50x64', 'ViT-B/32', 'ViT-B/16', 'ViT-L/14']
  TEMPLATE: lseg
  EXTRACT_EMBED: True  # Online extract text embeding from class or not
  CATEGORY_NAMES: [wall, floor, cabinet, bed, chair, sofa, table, door, window, bookshelf, picture, counter, desk,
                   curtain, refrigerator, showercurtain, toilet, sink, bathtub, otherfurniture]
#  BERT:
#  BACKBONE: bert-base-uncased


OPTIMIZATION:
  BATCH_SIZE_PER_GPU: 8
  NUM_EPOCHS: 25
  LR: 0.0001  # 4e-3
  SCHEDULER: poly
  OPTIMIZER: adam
  WEIGHT_DECAY: 0.0001
  MOMENTUM: 0.9
  MULTIPLIER: 0.1
  CLIP_GRAD: False
  PCT_START: 0.4
  DIV_FACTOR: 2
  MOMS: [0.95, 0.85]
  POWER: 0.9

OTHERS:
  PRINT_FREQ: 20
  SYNC_BN: False
  USE_AMP: True
